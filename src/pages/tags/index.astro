---
import PageLayout from '../../layouts/Page.astro';
import { getPublishedPosts, getAllTags, getPostsByTag } from '../../lib/blog';

const posts = await getPublishedPosts();
const tags = getAllTags(posts);
---

<PageLayout title="Tags" description="Posts grouped by tag.">
	<h1>Tags</h1>
	<ul class="tag-list">
		{tags.map((tag) => (
			<li>
				<a class="tag-link" href={`/tags/${encodeURIComponent(tag)}`}>#{tag}</a>
				<span class="tag-count">({getPostsByTag(posts, tag).length})</span>
			</li>
		))}
	</ul>
	<style>
		.tag-list {
			list-style: none;
			padding: 0;
			display: flex;
			flex-wrap: wrap;
			gap: 0.4em 1em;
			margin: 0.6em 0 1.5em;
			font-size: 1em;
			color: rgb(var(--gray));
		}
		.tag-list li {
			display: inline-flex;
			align-items: center;
			gap: 0.4em;
			margin: 0;
		}
		.tag-link {
			color: rgb(var(--gray));
			text-decoration: none;
			transition: 0.2s ease;
			font-weight: 500;
		}
		.tag-link:hover {
			color: rgb(var(--gray-dark));
		}
		.tag-count {
			font-size: 0.85em;
			color: rgb(var(--gray));
		}
	</style>
</PageLayout>
